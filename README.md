## 聊聊为啥写这个脚本？

参考思路和代码就好！**不推荐使用**，大概率是不适合你的，除非你直接同步我的日记记录方式，再者说了这代码就是一坨……

这个数据面板展示都是由各个二级标题 → 每个任务耗时所汇总而来，我手动处理的情况下，最快也需要需要 10 分钟左右，可以往下继续看看我之前的统计步骤

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2024/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1-01-24%20%E9%A2%84%E8%A7%88.png)

### 打开计算器找二级标题

比如第一个二级标题是『重要』，好的那就从它开始，找其下任务立标后记录的时间，到计算器一个个加起来，假设数据为：

- [x] 任务 1 **50min** / **15min**
- [x] 任务 3 **10min** + **25min**
- [x] 任务 5 **50min**
- [x] 任务 6 **2h35min**

要都是分钟的情况还好，可以直接加，但遇到小时单位还要先把小时转分钟加，比如上面的 “任务 6”，要先 +120 再 +35，如果存在多个这种数据，不想输入错了的话……

### 再来一遍！

加完拿到当前标题总分钟耗时，展示的数据需要 “小时 + 分钟” 的形式，所以还得先变成成小时，就是 ➗ 60，最后把剩下的分钟补上即可

- [x] 重要：**5h05min**

接着就是找第二个标题啦，重复第一步的操作，直到所有标题数据都统计结束，对了还有睡眠时长也要，记录是从几点睡到几点，脑子想一下就行啦（当然有时候会算错，是用脚本跑了之后我才知道居然有两次还算错了 😢）

- [x] 睡眠：23:25-07:15 💤 **7h50min**
- [x] 重要：**5h05min**
- [x] 生活：**2h10min**
- [x] 休闲：**3h**
- [x] 其他：**2h**

### 总时长统计

把刚刚统计的所有时间汇总变成总时长，也是小时 + 分钟，其实也简单，把对应标题耗时的前缀小时先拿出来，比如上面的数据 7+5+2+3+2，这就是 19 小时，然后计算分钟 50+5+10，换算为小时 + 分钟 1 小时 05 分钟也加起来，最后是

> 总时长：**20h05min**

### 总结一下

其实吧，我感觉把这件事情交给人来做，总会有算错的时候，有几次发现自己统计的时候漏掉了或者加错了。况且这种重复的劳动为啥我要一次次的浪费时间？让机器来做是最合适的，不过因为之前太懒的原因虽然把任务加到了 “代办清单” 里面，但一直没做，这几天有空了就稍微写下，发现其实蛮简单的，也遇到了一些小问题，不过都解决啦~

## 功能和迭代历史

2023-05-20 花了两天时间算是能用啦，当然还有很多不足之处，后续肯定会慢慢优化的！（继续堆屎）

2024-01-23 时隔半年，终于要重构啦！直接往 JS 里面写 HTML 代码的方式实在是看不下去了，练我自己都改不动了…… 😭

### 2024-01-24 重构版本

当前仓库，不搞那么多花里胡哨的东西了，简洁为主，我自己用不到的功能全删掉！

### 之前的脚本

> 代码地址

- [初始化命令行执行版本](https://github.com/fengstats/config/blob/main/3-js/note-stats.js)
- [给 uTools 快捷命令插件使用版本](https://github.com/fengstats/config/blob/main/3-js/note-stats-utools.js)

> 功能

- [x] 自由匹配标题
- [x] 可设置自定义匹配标题列表
- [x] 匹配 Record 标题内定义好的数据写入原文件
- [x] 生成 Record 标题以及相关统计信息插入原文件
- [ ] 支持
- [x] 根据标题分类解析出需要参与计算的时间
- [x] 支持自动计算支出小记/收入小记
- [x] 输出 Record 统计显示面板
- [x] 在 uTools 中通过 HTML 输出显示面板
- [x] 添加进度显示
- [x] 优化进度条显示，添加百分比进度小球

<details>
<summary>点击展开详情页面预览</summary>

<p>
2023-05-20 在原文件上所生成的 Record 标题与信息

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2023/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E5%88%86%E6%9E%90%E8%84%9A%E6%9C%AC%20Record.png)

</p>

2023-05-20 uTools 内输出面板

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2023/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1%E8%84%9A%E6%9C%AC%20uTools.png)

2024-01-12 uTools 内添加进度条

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2024/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1-%E6%B7%BB%E5%8A%A0%E8%BF%9B%E5%BA%A6%E6%9D%A1.png)

2024-01-20 uTools 内优化进度条显示

![](https://cdn.jsdelivr.net/gh/fengstats/blogcdn@main/2024/%E6%97%A5%E8%AE%B0%E6%97%B6%E9%95%BF%E7%BB%9F%E8%AE%A1-%E4%BC%98%E5%8C%96%E8%BF%9B%E5%BA%A6%E6%9D%A1%E6%A0%B7%E5%BC%8F.png)

</details>
